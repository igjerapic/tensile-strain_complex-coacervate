[workspace]
value_file = "signac_statepoint.json"

# default settings for the actions
[default.action]
command = "python actions.py --action $ACTION_NAME {directories}"
[default.action.resources]
processes.per_submission = 8
memory_per_cpu_mb = 512
[default.action.submit_options.habrok]
setup = """
module load LAMMPS/23Jun2022-foss-2021b-kokkos
module unload SciPy-bundle/2021.10-foss-2021b
module load Anaconda3/2024.02-1
conda activate bsa
"""
output_file_path = "slurm_outs"


[[action]]
name = "makedirs"
command = "(cd workspace/{directory} && mkdir lmp_bin lmp_data lmp_trj)"
products = ["lmp_data", "lmp_bin", "lmp_trj"]
[action.resources]
processes.per_submission = 1

[[action]]
name = "slabEquil"
previous_actions = ["makedirs"]
products = ["slabEquil.done"]
launchers = ["mpi"]
[action.group]
maximum_size = 1
[action.resources]
walltime.per_submission = "4:00:00"

[[action]]
name = "subEquil"
previous_actions = ["slabEquil"]
products = ["subEquil.done"]
launchers = ["mpi"]
[action.group]
maximum_size = 1
[action.resources]
walltime.per_submission = "15:00:00" # comment out when running locally (none cluster)


